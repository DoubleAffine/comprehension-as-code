---
phase: 01-comprehension-format
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - spec/COMPREHENSION_FORMAT.md
  - spec/OBSERVATION_FORMAT.md
autonomous: true

must_haves:
  truths:
    - "Specification documents exist that AI agents can read to understand the format"
    - "Comprehension format spec explains Bayesian structure (prior -> observation -> posterior)"
    - "Observation format spec explains raw event capture without interpretation"
    - "Confidence levels are operationally defined (what HIGH/MEDIUM/LOW/UNKNOWN mean)"
  artifacts:
    - path: "spec/COMPREHENSION_FORMAT.md"
      provides: "Human and AI readable specification for comprehension documents"
      contains: "prior"
    - path: "spec/OBSERVATION_FORMAT.md"
      provides: "Human and AI readable specification for observation documents"
      contains: "timestamp"
  key_links:
    - from: "spec/COMPREHENSION_FORMAT.md"
      to: "spec/OBSERVATION_FORMAT.md"
      via: "references observations"
      pattern: "observation"
    - from: "spec/COMPREHENSION_FORMAT.md"
      to: "src/comprehension/schema/comprehension.py"
      via: "describes schema"
      pattern: "Comprehension"
---

<objective>
Create human and AI readable specification documents for Comprehension and Observation formats.

Purpose: Specifications define the semantic meaning of each format, not just the schema. They explain WHY fields exist, HOW confidence levels should be interpreted, and WHEN to use each format. These specs are the authoritative reference for agents creating comprehension documents.

Output: Two specification documents in `spec/` directory that fully describe the comprehension and observation formats.
</objective>

<execution_context>
@/Users/ianphilipp/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ianphilipp/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-comprehension-format/01-RESEARCH.md
@.planning/phases/01-comprehension-format/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Comprehension Format Specification</name>
  <files>spec/COMPREHENSION_FORMAT.md</files>
  <action>
Create spec/COMPREHENSION_FORMAT.md with the following sections:

1. **Overview**: What comprehension is (structured understanding, not raw events)
2. **Document Structure**: YAML frontmatter + Markdown body
3. **Required Fields**:
   - id: Unique identifier (format: comp-{domain}-{sequence})
   - topic: Natural language description of what's understood
   - domain: Category for retrieval (api, database, architecture, etc.)
   - prior: BeliefPrior object (statement, confidence, source, reasoning)
   - observations: List of observation IDs that informed this comprehension
   - posterior: BeliefPosterior object (statement, confidence, update_reasoning, observations_used)
   - created/updated: ISO timestamps
   - version: Integer, increments on update
   - verified: Boolean, true if behavioral verification passed
   - spec: Schema version (comprehension/v1)

4. **Confidence Levels** (operational definitions):
   - HIGH: Verified against actual behavior; would bet on it; multiple independent confirmations
   - MEDIUM: Single confirmation; reasonable evidence; plausible but not certain
   - LOW: Tentative hypothesis; needs validation before acting
   - UNKNOWN: Explicitly uncertain; do not act on without more evidence

5. **Bayesian Structure**:
   - Prior: What was believed BEFORE observations (from training, docs, accumulated knowledge)
   - Observations: What was OBSERVED that could update beliefs
   - Posterior: What is believed AFTER incorporating observations

6. **Body Format**: Markdown sections for Summary, Evidence, Implications, Related Comprehension

7. **Versioning**: When version increments, how to handle schema migrations

Include example frontmatter block in the spec.
  </action>
  <verify>
- `test -f spec/COMPREHENSION_FORMAT.md` file exists
- `grep -q "prior" spec/COMPREHENSION_FORMAT.md` contains prior field
- `grep -q "posterior" spec/COMPREHENSION_FORMAT.md` contains posterior field
- `grep -q "ConfidenceLevel" spec/COMPREHENSION_FORMAT.md` OR `grep -q "HIGH.*MEDIUM.*LOW" spec/COMPREHENSION_FORMAT.md` contains confidence definitions
  </verify>
  <done>Comprehension format specification document exists with Bayesian structure explained</done>
</task>

<task type="auto">
  <name>Task 2: Create Observation Format Specification</name>
  <files>spec/OBSERVATION_FORMAT.md</files>
  <action>
Create spec/OBSERVATION_FORMAT.md with the following sections:

1. **Overview**: What observations are (raw events without interpretation)
   - Key distinction: Observations are WHAT HAPPENED; Comprehension is WHAT WE NOW BELIEVE

2. **Document Structure**: YAML frontmatter + Markdown body (lighter than comprehension)

3. **Required Fields**:
   - id: Unique identifier (format: obs-{sequence} or obs-{timestamp-hash})
   - timestamp: ISO timestamp of when observation was made
   - source: Agent/system that made the observation (e.g., "agent/api-integration-agent")
   - event: Natural language description of what was observed

4. **Optional Fields**:
   - context: Dictionary of additional context (project, task, prior_belief ref)
   - trace_ref: Reference to full execution trace if available
   - outcome: Structured outcome if applicable (status codes, errors, results)

5. **Body Format**: Brief Markdown description; can include code snippets or logs

6. **Relationship to Comprehension**: Observations are referenced by ID in comprehension documents; they are inputs to belief updates

7. **Retention Policy**: (placeholder for Phase 3 - memory intelligence)

Include example frontmatter block in the spec.
  </action>
  <verify>
- `test -f spec/OBSERVATION_FORMAT.md` file exists
- `grep -q "timestamp" spec/OBSERVATION_FORMAT.md` contains timestamp field
- `grep -q "event" spec/OBSERVATION_FORMAT.md` contains event field
- Document explains relationship to comprehension
  </verify>
  <done>Observation format specification document exists explaining raw event capture</done>
</task>

</tasks>

<verification>
1. Both spec files exist: `ls spec/COMPREHENSION_FORMAT.md spec/OBSERVATION_FORMAT.md`
2. Comprehension spec has Bayesian structure: grep for prior, observation, posterior
3. Confidence levels defined operationally: spec explains what HIGH/MEDIUM/LOW/UNKNOWN mean
4. Distinction clear: Observation spec explains difference from Comprehension
</verification>

<success_criteria>
- [ ] spec/COMPREHENSION_FORMAT.md exists and is readable
- [ ] spec/OBSERVATION_FORMAT.md exists and is readable
- [ ] Comprehension spec explains Bayesian structure (prior -> observation -> posterior)
- [ ] Confidence levels have operational definitions (what each level means)
- [ ] Observation spec distinguishes raw events from interpreted understanding
- [ ] Both specs include example frontmatter blocks
</success_criteria>

<output>
After completion, create `.planning/phases/01-comprehension-format/01-02-SUMMARY.md`
</output>
